---
phase: 01-foundation
plan: 07
type: execute
wave: 5
depends_on: ["01-05"]
files_modified:
  - apps/admin/app/(protected)/layout.tsx
  - apps/admin/app/(protected)/dashboard/page.tsx
  - apps/admin/components/layout/sidebar.tsx
  - apps/admin/components/layout/header.tsx
  - apps/admin/components/layout/role-badge.tsx
  - apps/admin/app/globals.css
  - apps/participant/app/(protected)/dashboard/page.tsx
  - apps/participant/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Admin sees a dashboard shell with navigation sidebar after login"
    - "Admin's role is displayed as a badge in the header"
    - "Powered by OpBros footer is visible on all pages (INFR-08)"
    - "Ephraim Care branding (green/teal, Montserrat/Inter, 8px radius) is applied (INFR-09)"
    - "Participant portal shows basic dashboard with role display"
  artifacts:
    - path: "apps/admin/components/layout/sidebar.tsx"
      provides: "Navigation sidebar with links to future sections"
      contains: "Dashboard"
    - path: "apps/admin/components/layout/header.tsx"
      provides: "Top header with user info and role badge"
      contains: "role"
    - path: "apps/admin/app/(protected)/dashboard/page.tsx"
      provides: "Dashboard home page with welcome message and role"
      contains: "Welcome"
  key_links:
    - from: "apps/admin/app/(protected)/layout.tsx"
      to: "apps/admin/components/layout/sidebar.tsx"
      via: "layout imports sidebar"
      pattern: "Sidebar"
    - from: "apps/admin/app/(protected)/layout.tsx"
      to: "packages/ui/src/components/footer.tsx"
      via: "layout includes PoweredByFooter"
      pattern: "PoweredByFooter"
    - from: "apps/admin/app/globals.css"
      to: "packages/ui/src/styles/globals.css"
      via: "imports shared theme"
      pattern: "@import.*@ephraimcare/ui"
---

<objective>
Build the admin dashboard shell with navigation sidebar, header with role badge, and Ephraim Care branding. Also create the participant portal's basic dashboard. This proves that after login, users see a properly branded, role-aware interface.

Purpose: Success Criteria #2 requires "Admin can log in and see a dashboard shell with their role displayed." This plan delivers that shell with proper branding (INFR-08, INFR-09).
Output: Admin dashboard with sidebar nav, header with role badge, OpBros footer, and Ephraim Care theme applied.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
@.planning/phases/01-foundation/01-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Admin dashboard layout with sidebar, header, and branding</name>
  <files>
    apps/admin/app/(protected)/layout.tsx
    apps/admin/app/(protected)/dashboard/page.tsx
    apps/admin/components/layout/sidebar.tsx
    apps/admin/components/layout/header.tsx
    apps/admin/components/layout/role-badge.tsx
    apps/admin/app/globals.css
    apps/admin/app/layout.tsx
  </files>
  <action>
    **apps/admin/app/globals.css:**
    - Import the shared theme: `@import "@ephraimcare/ui/styles/globals.css";`
    - Add Google Fonts import for Montserrat and Inter (or use next/font)
    - Any admin-specific style overrides

    **apps/admin/app/layout.tsx (update):**
    - Root layout with html lang="en"
    - Import globals.css
    - Set font-family to Inter for body
    - Include metadata: title "Ephraim Care Admin", description

    **apps/admin/components/layout/sidebar.tsx:**
    - 'use client' component
    - Fixed left sidebar (w-64, full height, border-right)
    - Top section: Ephraim Care logo/name with green primary color
    - Navigation links (use lucide-react icons):
      - Dashboard (LayoutDashboard icon) - active state
      - Participants (Users icon) - placeholder, disabled
      - Workers (Briefcase icon) - placeholder, disabled
      - Shifts (Calendar icon) - placeholder, disabled
      - Invoices (FileText icon) - placeholder, disabled
      - Settings (Settings icon) - placeholder, disabled
    - Active link: green background highlight, bold text
    - Disabled links: muted text, cursor-not-allowed (coming in future phases)
    - Bottom section: user email, sign out button
    - Sign out button calls supabase.auth.signOut() and redirects to /login
    - Responsive: hidden on mobile, show hamburger menu (or drawer)
    - Use Ephraim Care theme colors (bg-background, text-foreground, primary for accents)

    **apps/admin/components/layout/header.tsx:**
    - 'use client' component (or server with passed props)
    - Horizontal bar at top of main content area
    - Left: Page title (passed as prop or from route)
    - Right: User name/email + RoleBadge component
    - Border-bottom separator
    - Height: h-16

    **apps/admin/components/layout/role-badge.tsx:**
    - Small colored badge displaying the user's role
    - Color mapping:
      - admin: green (primary)
      - coordinator: teal (secondary)
      - worker: blue
      - participant: purple
    - Pill shape (rounded-full, px-3 py-1, text-xs font-medium)
    - Uppercase text

    **apps/admin/app/(protected)/layout.tsx (update):**
    - Flex layout: Sidebar on left, main content area on right
    - Main area: Header at top, content below (flex-1 overflow-auto)
    - PoweredByFooter at bottom of main content area
    - Wrap with SessionProvider for inactivity timeout
    - Get user data server-side and pass to sidebar/header:
      - const supabase = await createClient()
      - const { data: { user } } = await supabase.auth.getUser()
      - Extract role from user's app_metadata or JWT (jwt-decode or refetch claims)

    **apps/admin/app/(protected)/dashboard/page.tsx (update):**
    - Server component
    - Welcome heading: "Welcome back, {user.email}"
    - Role display: "You are logged in as {role}" with RoleBadge
    - Quick stats placeholder cards (4-column grid):
      - Total Participants: "Coming soon"
      - Active Workers: "Coming soon"
      - Shifts This Week: "Coming soon"
      - Pending Invoices: "Coming soon"
    - Cards use the 8px border radius, card background, subtle shadow
    - Styled with Tailwind using theme tokens (bg-card, text-card-foreground, rounded-md)
  </action>
  <verify>
    - Sidebar renders with navigation links and Ephraim Care branding
    - Header shows user email and role badge
    - Dashboard page displays welcome message with role
    - PoweredByFooter visible at page bottom
    - Colors match Ephraim Care brand (green primary, teal secondary)
    - Font is Inter for body text
    - Border radius is 8px on cards
    - Sign out button exists in sidebar
  </verify>
  <done>Admin dashboard shell with sidebar, header, role badge, and Ephraim Care branding</done>
</task>

<task type="auto">
  <name>Task 2: Participant portal dashboard shell</name>
  <files>
    apps/participant/app/globals.css
    apps/participant/app/layout.tsx
    apps/participant/app/(protected)/layout.tsx
    apps/participant/app/(protected)/dashboard/page.tsx
    apps/participant/components/layout/header.tsx
  </files>
  <action>
    **apps/participant/app/globals.css:**
    - Import shared theme: `@import "@ephraimcare/ui/styles/globals.css";`

    **apps/participant/app/layout.tsx (update):**
    - Root layout with metadata: title "Ephraim Care Participant Portal"
    - Import globals.css
    - Set Inter font

    **apps/participant/app/(protected)/layout.tsx:**
    - Simpler layout than admin (no sidebar needed for read-only portal)
    - Header with Ephraim Care logo, user name, and sign out button
    - Main content area (max-width container, centered)
    - PoweredByFooter at bottom
    - Include SessionProvider for inactivity timeout

    **apps/participant/components/layout/header.tsx:**
    - Simple horizontal header
    - Left: Ephraim Care name/logo
    - Right: user email, role badge (participant), sign out button
    - Clean, minimal design

    **apps/participant/app/(protected)/dashboard/page.tsx:**
    - Welcome message: "Welcome, {user.email}"
    - Placeholder cards:
      - My Plan: "Plan details coming soon"
      - Budget: "Budget tracking coming soon"
      - Appointments: "Appointments coming soon"
      - Invoices: "Invoices coming soon"
    - Read-only indicator: "This portal is read-only"
    - Same branding tokens as admin (green, teal, 8px radius)
  </action>
  <verify>
    - Participant portal renders with Ephraim Care branding
    - Dashboard shows welcome message and placeholder cards
    - PoweredByFooter visible
    - Header has sign out functionality
    - Layout is distinct from admin (no sidebar)
  </verify>
  <done>Participant portal dashboard shell with branding and read-only layout</done>
</task>

</tasks>

<verification>
- Admin dashboard: sidebar + header + role badge + 4 placeholder cards
- Participant portal: header + 4 placeholder cards + read-only indicator
- Both portals have PoweredByFooter with opbros.online link
- Ephraim Care branding applied: green primary, teal secondary, Montserrat headings, Inter body, 8px radius
- Sign out works from both portals
- Role badge correctly displays user's role with color coding
</verification>

<success_criteria>
- Admin sees dashboard with role displayed after login (Success Criteria #2)
- OpBros footer visible on both portals (INFR-08)
- Branding matches spec: green #66BB6A, teal #00BFA5, Montserrat, Inter, 8px radius (INFR-09)
- Navigation sidebar shows future section placeholders
- Both portals are styled and functional shells
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-07-SUMMARY.md`
</output>
